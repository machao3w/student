<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.machao.student.dao.StudentMapper" >
  <resultMap id="BaseResultMap" type="com.machao.student.entity.Student" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    <result column="number" property="number" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="VARCHAR" />
    <result column="grade" property="grade" jdbcType="INTEGER" />
    <result column="class" property="class" jdbcType="INTEGER" />
  </resultMap>
  <resultMap id="StudentAndGradeMap" type="com.machao.student.entity.Student" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    <result column="number" property="number" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="VARCHAR" />
    <result column="grade" property="grade" jdbcType="INTEGER" />
    <result column="classes" property="classes" jdbcType="INTEGER" />
      <association property="gradeMid" javaType="com.machao.student.entity.GradeMid">
        <result column="number_m" property="numberM" jdbcType="VARCHAR" />
        <result column="chinese" property="chinese" jdbcType="VARCHAR" />
        <result column="math" property="math" jdbcType="VARCHAR" />
        <result column="english" property="english" jdbcType="VARCHAR" />
        <result column="physics" property="physics" jdbcType="VARCHAR" />
        <result column="chemistry" property="chemistry" jdbcType="VARCHAR" />
        <result column="geography" property="geography" jdbcType="VARCHAR" />
        <result column="politics" property="politics" jdbcType="VARCHAR" />
        <result column="history" property="history" jdbcType="VARCHAR" />
        <result column="biography" property="biography" jdbcType="VARCHAR" />
      </association>
  </resultMap>
  <insert id="insert" parameterType="com.machao.student.entity.Student" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    insert into student_info (number, name, sex, 
      grade, class)
    values (#{number,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{sex,jdbcType=VARCHAR}, 
      #{grade,jdbcType=INTEGER}, #{class,jdbcType=INTEGER})
  </insert>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    select number, name, sex, grade, class
    from student_info
  </select>

  <select id="selectByPage01"  resultMap="StudentAndGradeMap">
    select number, name, sex, grade, classes, ${projects} from student_info
            inner join grade_mid gm on number = gm.number_m
            inner join grade_final gf on number = gf.number_f
    <where>
      <if test="number != null"  > and number like '%${classes}%' </if>
      <if test="name != null"  > and name like '%${classes}%' </if>
      <if test="grade != null"  > and grade like '%${classes}%' </if>
      <if test="classes != null"  > and classes like '%${classes}%' </if>
    </where>

  </select>

  <select id="selectByPage01ContainEnglish"  resultMap="StudentAndGradeMap">
    select student_info.number, student_info.name, student_info.sex, student_info.grade, student_info.classes, #{projects} from student_info
            inner join grade_mid gm on stu.number = gm.number
            inner join grade_final gf on stu.number = gf.number
  <where>
    <if test="student_info.number!= null"  > and stu.number like "%"#{number}"%" </if>
    <if test="student_info.name!= null"  > and stu.name like "%"#{name}"%"</if>
    <if test="student_info.grade!= null"  > and stu.grade like "%"#{grade}"%"</if>
    <if test="student_info.classes!= null"  > and stu.classess like "%"#{classes}"%"</if>
  </where>


  </select>

  <select id="selectByTest" parameterType="String" resultMap="BaseResultMap">
    select number, name, sex, grade, classes
    from student_info
    where number = #{number}
  </select>
</mapper>