<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.machao.student.dao.StudentMapper" >
  <resultMap id="BaseResultMap" type="com.machao.student.entity.Student" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    <result column="number" property="number" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="VARCHAR" />
    <result column="grade" property="grade" jdbcType="INTEGER" />
    <result column="class" property="class" jdbcType="INTEGER" />
  </resultMap>
  <resultMap id="StudentAndGradeMap" type="com.machao.student.entity.Student" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    <result column="number" property="number" jdbcType="VARCHAR" />
    <result column="name" property="name" jdbcType="VARCHAR" />
    <result column="sex" property="sex" jdbcType="VARCHAR" />
    <result column="grade" property="grade" jdbcType="INTEGER" />
    <result column="classes" property="classes" jdbcType="INTEGER" />
      <association property="gradeMid" javaType="com.machao.student.entity.GradeMid">
        <result column="number_m" property="numberM" jdbcType="VARCHAR" />
        <result column="chinese_mid" property="chineseMid" jdbcType="VARCHAR" />
        <result column="math_mid" property="mathMid" jdbcType="VARCHAR" />
        <result column="english_mid" property="englishMid" jdbcType="VARCHAR" />
        <result column="physics_mid" property="physicsMid" jdbcType="VARCHAR" />
        <result column="chemistry_mid" property="chemistryMid" jdbcType="VARCHAR" />
        <result column="geography_mid" property="geographyMid" jdbcType="VARCHAR" />
        <result column="politics_mid" property="politicsMid" jdbcType="VARCHAR" />
        <result column="history_mid" property="historyMid" jdbcType="VARCHAR" />
        <result column="biography_mid" property="biographyMid" jdbcType="VARCHAR" />
      </association>
      <association property="gradeFinal" javaType="com.machao.student.entity.GradeFinal">
        <result column="number_f" property="numberF" jdbcType="VARCHAR" />
        <result column="chinese_final" property="chineseFinal" jdbcType="VARCHAR" />
        <result column="math_final" property="mathFinal" jdbcType="VARCHAR" />
        <result column="english_final" property="englishFinal" jdbcType="VARCHAR" />
        <result column="physics_final" property="physicsFinal" jdbcType="VARCHAR" />
        <result column="chemistry_final" property="chemistryFinal" jdbcType="VARCHAR" />
        <result column="geography_final" property="geographyFinal" jdbcType="VARCHAR" />
        <result column="politics_final" property="politicsFinal" jdbcType="VARCHAR" />
        <result column="history_final" property="historyFinal" jdbcType="VARCHAR" />
        <result column="biography_final" property="biographyFinal" jdbcType="VARCHAR" />
      </association>
  </resultMap>

  <insert id="insert" parameterType="com.machao.student.entity.Student" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    insert into student_info (number, name, sex, 
      grade, class)
    values (#{number,jdbcType=VARCHAR}, #{name,jdbcType=VARCHAR}, #{sex,jdbcType=VARCHAR}, 
      #{grade,jdbcType=INTEGER}, #{class,jdbcType=INTEGER})
  </insert>
  <select id="selectAll" resultMap="BaseResultMap" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Thu Aug 15 14:48:54 CST 2019.
    -->
    select number, name, sex, grade, class
    from student_info
  </select>

  <select id="selectByPage01"  resultMap="StudentAndGradeMap">
    select number, name, sex, grade, classes, ${projects} from student_info
            inner join grade_mid gm on number = gm.number_m
            inner join grade_final gf on number = gf.number_f
    <where>
      <if test="number != null"  > and number like '%${number}%' </if>
      <if test="name != null"  > and name like '%${name}%' </if>
      <if test="grade != null"  > and grade like '%${grade}%' </if>
      <if test="classes != null"  > and classes = ${classes} </if>
    </where>

  </select>

  <select id="selectByPage01ContainEnglish"  resultMap="StudentAndGradeMap">
    select number, name, sex, grade, classes, ${projects} from student_info
            inner join grade_mid gm on number = gm.number_m
            inner join grade_final gf on number = gf.number_f
  <where>
    <if test="number != null"  > and number like '%${number}%' </if>
    <if test="name != null"  > and name_english like '%${name}%' </if>
    <if test="grade != null"  > and grade like '%${grade}%' </if>
    <if test="classes != null"  > and classes = ${classes} </if>
  </where>


  </select>

  <select id="selectAllAndGrade" resultMap="StudentAndGradeMap" >
    select * from student_info
            inner join grade_mid gm on number = gm.number_m
            inner join grade_final gf on number = gf.number_f
    <where>
      <if test="grade != null"  > and grade like '%${grade}%' </if>
      <if test="classes != null"  > and classes = ${classes} </if>
    </where>
  </select>

  <select id="selectByTest" parameterType="String" resultMap="BaseResultMap">
    select number, name, sex, grade, classes
    from student_info
    where number = #{number}
  </select>
</mapper>